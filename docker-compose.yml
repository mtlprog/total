services:
  server:
    image: alpine:3.19
    ports:
      - "8080:8080"
    volumes:
      - ./total:/app/total:ro
    working_dir: /app
    entrypoint: ["/app/total"]
    command: ["serve"]
    environment:
      - ORACLE_PUBLIC_KEY=${ORACLE_PUBLIC_KEY}
      - PINATA_API_KEY=${PINATA_API_KEY:-}
      - PINATA_SECRET=${PINATA_SECRET:-}
      - MARKET_IDS=${MARKET_IDS:-}
      - LOG_LEVEL=${LOG_LEVEL:-info}
    restart: unless-stopped
