<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Transaction — Total</title>
    <meta name="description" content="Sign and submit your Stellar transaction.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    {{template "styles" .}}
</head>
<body>
    <div class="container">
        {{template "header" .}}
        <main class="main">

            <div class="back-links">
                <a href="/" class="back-link">← Markets</a>
                {{if and .MarketID (ne .MarketID "new")}}
                <a href="/market/{{.MarketID}}" class="back-link">View Market</a>
                {{end}}
            </div>

            <div style="margin-bottom: 1.75rem;">
                <div style="font-size: 0.75rem; letter-spacing: 0.2em; text-transform: uppercase; color: var(--yes); margin-bottom: 0.4rem;">Transaction Ready</div>
                <p style="font-size: 1rem; color: var(--text-2);">{{.Result.Description}}</p>
            </div>

            <div class="panel">
                <h3 class="panel-title">Transaction Details</h3>
                <div class="meta-row">
                    <span class="meta-key">Sign With</span>
                    <span class="meta-val">{{.Result.SignWith}}</span>
                </div>
                <div class="meta-row">
                    <span class="meta-key">Submit To</span>
                    <span class="meta-val" style="font-size: 0.85rem;">{{.Result.SubmitURL}}</span>
                </div>
            </div>

            <div class="panel">
                <h3 class="panel-title">Transaction XDR</h3>
                <div class="xdr-box" id="xdr">{{.Result.XDR}}</div>
                <p style="font-size: 0.82rem; color: var(--text-2); margin-top: 0.6rem;">
                    Select all and copy — Ctrl+A, Ctrl+C / Cmd+A, Cmd+C
                </p>
                <div style="margin-top: 1rem;">
                    <a href="{{labURL .Result.XDR .NetworkPassphrase}}" target="_blank" rel="noopener" class="btn btn-primary">
                        Open in Stellar Lab →
                    </a>
                </div>
            </div>

            <div class="panel">
                <h3 class="panel-title">Next Steps</h3>
                <ol class="steps">
                    <li>Click "Open in Stellar Lab" above (or copy XDR manually)</li>
                    <li>In Stellar Lab, go to "Sign Transaction"</li>
                    <li>Sign with your secret key (<code>{{truncate .Result.SignWith 20}}</code>)</li>
                    <li>Submit the signed transaction</li>
                </ol>
                <div class="warning-box" style="margin-top: 1.25rem; margin-bottom: 0;">
                    <strong>Security:</strong> Never share your secret key. Only sign transactions you understand.
                    The XDR above does not contain any private keys.
                </div>
            </div>

        </main>
    </div>
    {{template "footer" .}}
</body>
</html>
